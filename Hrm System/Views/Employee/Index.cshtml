@using PagedList
@using PagedList.Mvc
@model IPagedList<Hrm_System.Models.tblEmployee>

    @{
        ViewBag.Title = "PPC-HRM Employees";
    }

    <h2>Employees</h2>
    <ul class="nav nav-pills pills-secondary">
        <li class="active"><a data-toggle="tab" href="#home"><b>Dashboard</b></a></li>
        <li><a data-toggle="tab" href="#menu1"><b>Employee List</b></a></li>
        <li><a data-toggle="tab" href="#menu2"><b>Employee History</b></a></li>
        <li><a data-toggle="tab" href="#menu3"><b>Employee Type</b></a></li>
    </ul>
    <hr />
    <div class="tab-content">
        <div id="home" class="tab-pane fade in active">
         
         <div class="row">
             <div class="col-md-4">
                 <canvas id="barChart" width="400" height="150"></canvas>
                 </div>
             <div class="col-md-4">
                 <canvas id="LineChart" width="400" height="150"></canvas>
             </div>
             <div class="col-md-4">
                 
             </div>
         </div>
         <div class="row">
             <div class="col-md-4">
                 <div class="thumbnail">
                     <div class="caption">
                         <div style="width:100%;padding:5px;text-align:center;line-height:60px;color:#081e70;font-size:2.75em;">@ViewBag.Active</div>
                         <h4 style="text-align:center;">Employees</h4>
                     </div>
                 </div>
                 </div>
             <div class="col-md-4">
                 <div class="thumbnail">
                     <img class="img-responsive" src="~/images/employees.png"  width="150" height="150"/>
                     <div class="caption">
                         <div style="width:100%;padding:5px;text-align:center;line-height:60px;color:#081e70;font-size:2.75em;">@ViewBag.Departments</div>
                         <h4 style="text-align:center;">Departments</h4>
                     </div>
                 </div>
             </div>
             <div class="col-md-4">
                 <div class="thumbnail">
                     <div class="caption">
                         <div style="width:100%;padding:5px;text-align:center;line-height:60px;color:#081e70;font-size:2.75em;">@ViewBag.Positions</div>
                         <h4 style="text-align:center;">Positions</h4>
                     </div>
                 </div>
             </div>
         </div>
        </div>
        <div id="menu1" class="tab-pane fade">
            <div style="float:right; width:20%;text-align:right;">
                @using (
               Html.BeginForm("Index", "DebitOrder"))
                {@Html.AntiForgeryToken()
                    <div class="input-group input-group-sm">
                        <input id="SearchBox" type="text" name="name" class="form-control" placeholder="User Id...">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="submit" id="submit"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
                        </span>
                    </div>
                }
            </div>
            <div style="float:left;width:80%">
                <div class="btn-group btn-group-xs">
                    <a class="btn btn-default" href="@Url.Action("Create")"><div style="color:#2facc2">New Employee</div></a>
                    @*<button type="button" class="btn btn-default "> @Html.ActionLink("Create New", "Create")</button>*@
                </div>
            </div>
            <table class="table table-striped table-hover table-bordered table-condensed " id="table1">
                <thead>
                    <tr>
                        <th>
                            Name
                        </th>
                        <th>
                            Branch
                        </th>
                        <th>
                            Department
                        </th>
                        <th>
                            Title
                        </th>
                        <th>
                            Status
                        </th>
                    </tr>
                </thead>

                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.emp_name)

                            @Html.DisplayFor(modelItem => item.emp_lname)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.tblBranch.br_name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.tblDepartment.dpt_name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.tblPosition.pos_title)
                            <a href=" @item.emp_id "></a>
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.tblEmployeeStatu.empst_title)
                        </td>
                    </tr>
                }

            </table>
            <div class="pagination">
                @Html.PagedListPager(Model, page => Url.Action("Index", new { page }), PagedListRenderOptions.PageNumbersOnly)
            </div>
        </div>
        <div id="menu2" class="tab-pane fade">
            <h3>Education</h3>
        </div>
        <div id="menu3" class="tab-pane fade">
            <h3>Work Experience</h3>
        </div>
      <hr />
    </div>

    <hr class="featurette-divider" />


    <script>
        $(function () {
            $('#hover, #striped, #condensed').click(function () {
                var classes = 'table';

                if ($('#hover').prop('checked')) {
                    classes += ' table-hover';
                }
                if ($('#condensed').prop('checked')) {
                    classes += ' table-condensed';
                }
                $('#table-style').bootstrapTable('destroy')
                    .bootstrapTable({
                        classes: classes,
                        striped: $('#striped').prop('checked')
                    });
            });
        });

        function rowStyle(row, index) {
            var classes = ['active', 'success', 'info', 'warning', 'danger'];

            if (index % 2 === 0 && index / 2 < classes.length) {
                return {
                    classes: classes[index / 2]
                };
            }
            return {};
        }

        $('#table1 tr').click(function () {
            var href = $(this).find("a").attr("href");
            var id = $(this).find("id");
            //alert(href);
            if (href) {
                window.location = "/Employee/Details?id=" + href;
            }
        });


 </script>
                     <script>
                //-----Single Bar --------------
                var c = document.getElementById("barChart");
                var ctx = c.getContext("2d");
                var tData = $.getValues("/Employee/BarChartData");
                var myBarChart = new Chart(ctx, {
                    type: 'bar',
                    data: tData
                });
                //----Donut Chart---------
                //var c = document.getElementById("DonutChart");
                //var ctx = c.getContext("2d");
                //var tData = $.getValues("/Employee/DonutChartData");
                //var myPieChart = new Chart(ctx, {
                //    type: 'pie',
                //    data: tData,
                //});
                //----Line Chart---------
                var c = document.getElementById("LineChart");
                var ctx = c.getContext("2d");
                var tData = $.getValues("/Employee/LineChartData");
                var myLineChart = new Chart(ctx, {
                    type: 'line',
                    data: tData
                });
                     </script>